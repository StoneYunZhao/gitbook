# Principle

设计不是强行遵守的，是一个平衡的选择。

## 基于接口而非实现编程

这条原则的英文是“Program to an interface, not an implementation”，出自 1994 年的 GoF，当时很多编程语言还没诞生，比如 Java，所以这里的接口不要理解为编程语言中的接口。这条原则的接口可以理解为编程语言中的[接口或抽象类](../../java/grammar/basic.md#ji-cheng)。

这条原则将接口和实现分离，封装不稳定的实现，暴露稳定的接口。上游系统面向接口而非实现编程，不依赖不稳定的实现细节，降低耦合性、提高扩展性。

这个原则更加贴切的表述应该是“**基于抽象而非实现编程**”，这样表述更加体现这条原则的初衷。越抽象、越顶层、越脱离具体某一实现的设计，越能提高代码的灵活性，越能应对未来的需求变化。好的代码设计，不仅能应对当下的需求，而且在将来需求发生变化的时候，仍然能够在不破坏原有代码设计的情况下灵活应对。

怎么做到这条原则呢？

* 函数命名不能暴露任何实现细节。比如 uploadToAliyun\(\) -&gt; upload\(\)。
* 封装具体实现。
* 为实现类定义接口。

总之，要有抽象意识、封装意识、接口意识。在定义接口的时候，不要暴露任何实现细节。接口的定义**只表明做什么，而不是怎么做**。要多思考接口设计是否足够通用，是否能够做到在替换具体的接口实现的时候，不需要任何接口定义的改动。

{% hint style="info" %}
**那是不是需要给每个实现类都定义对应的接口呢？**  
凡事就讲一个“度”，如果在业务场景下，某个功能只有一种实现，未来不可能被替换，那么就没必要设计接口。
{% endhint %}

## 开闭原则

定义：一个软件实体，如类、模块、函数，应该对扩展开放，对修改关闭。

核心思想：用抽象构件框架，用实现扩展细节。

## 依赖倒置原则

定义：高层模块不应该依赖低层模块，二者都应该依赖其抽象。

核心思想：面向接口编程，而不应该面向实现编程。

## 单一职责原则

定义：不要存在多于一个导致类变更的原因。

核心思想：一个类、接口、方法只负责一项职责。

## 接口隔离原则

定义：用多个专门的接口，而不使用单一的总接口，客户端不应该依赖它不需要的接口。

核心思想：一个类对一个类的依赖应该建立在最小的接口上。尽量细化接口，接口中的方法尽可能少。**注意适度**。

## 迪米特原则

定义：一个对象应该对其它对象保持最少的了解。又叫最少知道原则。

核心思想：尽量降低类于类之间的耦合。尽量只使用成员变量、方法的输入输出参数的类型，方法体内的新类型尽量不用。

