# Hash Algorithm

定义：将任意长度的二进制值串映射为固定长度的二进制串，这个映射规则就是哈希算法。映射之后得到的值就是哈希值。

哈希算法的要求：

1. 从哈希值不能反推原始数据
2. 对输入数据敏感，修改原始数据一个bit，得到的hash值也大不相同
3. 散列冲突的概率很小，但是不能完全避免（鸽巢原理）
4. 执行效率要高，针对较长的文本，也能快速计算hash值

hash算法的应用：

* 安全加密，MD5（Message Digest Algorithm），SHA（Secure Hash Algorithm）。第1、3点很重要。
* 唯一标识，在海量图库中搜索图片是否存在，每张图片取hash值，先比较hash值，再比较原始图片。
* 数据校验，BT下载文件分割成很多块，每块计算hash值，保存在种子文件中，这样可以保证下载数据完整。
* 散列函数，注重第4点，第1、3点不太重要。
* 负载均衡，会话粘滞（session sticky）的实现，计算客户端的IP的hash值，对服务器数量取余。
* 数据分片，在第二个例子中，图片量巨大，一台机器无法存储，所以对图片计算hash，然后对机器数取余，放入对应服务器。
* 分布式存储，海量数据单台机器无法存储，根据hash值存储在不同机器上。当数据量增加，需要增加服务器，那么需要重新计算hash，搬迁到正确的机器。一致性hash算法，可以大量减少数据搬迁。

一致性hash：

虚拟环和虚拟结点。

[https://www.sohu.com/a/158141377\_479559](https://www.sohu.com/a/158141377_479559)

