# Scheduling

为任务寻找合适的服务器，叫做调度。

## 单体调度

集群中仅一个节点运行调度进程，调度器同时管理任务和资源，拥有资源和任务的全局视图。

调度算法一般包括两个阶段：

* 可行性检查，找到多台可以运行任务的机器。
* 评分，从多台中选择一台。又分为“最差匹配”和“最佳匹配”两种。

![](../../.gitbook/assets/image%20%28282%29.png)

若是有多个集群，则通过**集群联邦**来实现单体调度。集群联邦就是单体调度的分层实现。

## 两层调度

两层调度的第一层是中央调度器，只负责资源的管理和分配；第二层只能获得部分的资源视图，负责任务与资源匹配。

![](../../.gitbook/assets/image%20%28283%29.png)

## 共享状态调度

有多个调度器，共享集群状态，包括资源状态和任务状态。通过乐观并发调度来解决冲突，而双层调度是悲观的并发调度。

![](../../.gitbook/assets/image%20%28279%29.png)

## 对比

![](../../.gitbook/assets/image%20%28284%29.png)

![](../../.gitbook/assets/image%20%28278%29.png)

